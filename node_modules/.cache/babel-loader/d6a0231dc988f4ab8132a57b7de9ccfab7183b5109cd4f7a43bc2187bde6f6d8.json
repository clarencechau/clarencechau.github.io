{"ast":null,"code":"'use client';\n\nimport { useRef, useCallback, useEffect } from 'react';\nimport { useCallbackRef } from '../use-callback-ref/use-callback-ref.mjs';\nfunction useThrottledCallbackWithClearTimeout(callback, wait) {\n  const handleCallback = useCallbackRef(callback);\n  const latestInArgsRef = useRef();\n  const latestOutArgsRef = useRef();\n  const active = useRef(true);\n  const waitRef = useRef(wait);\n  const timeoutRef = useRef(-1);\n  const clearTimeout = () => window.clearTimeout(timeoutRef.current);\n  const callThrottledCallback = useCallback((...args) => {\n    handleCallback(...args);\n    latestInArgsRef.current = args;\n    latestOutArgsRef.current = args;\n    active.current = false;\n  }, [handleCallback]);\n  const timerCallback = useCallback(() => {\n    if (latestInArgsRef.current && latestInArgsRef.current !== latestOutArgsRef.current) {\n      callThrottledCallback(...latestInArgsRef.current);\n      timeoutRef.current = window.setTimeout(timerCallback, waitRef.current);\n    } else {\n      active.current = true;\n    }\n  }, [callThrottledCallback]);\n  const throttled = useCallback((...args) => {\n    if (active.current) {\n      callThrottledCallback(...args);\n      timeoutRef.current = window.setTimeout(timerCallback, waitRef.current);\n    } else {\n      latestInArgsRef.current = args;\n    }\n  }, [callThrottledCallback, timerCallback]);\n  useEffect(() => {\n    waitRef.current = wait;\n  }, [wait]);\n  return [throttled, clearTimeout];\n}\nfunction useThrottledCallback(callback, wait) {\n  return useThrottledCallbackWithClearTimeout(callback, wait)[0];\n}\nexport { useThrottledCallback, useThrottledCallbackWithClearTimeout };","map":{"version":3,"names":["useThrottledCallbackWithClearTimeout","callback","wait","handleCallback","useCallbackRef","latestInArgsRef","useRef","latestOutArgsRef","active","waitRef","timeoutRef","clearTimeout","window","current","callThrottledCallback","useCallback","args","timerCallback","setTimeout","throttled","useEffect","useThrottledCallback"],"sources":["/Users/clarencechau/Documents/projects/personal-website/clarencechau.github.io/node_modules/@mantine/hooks/src/use-throttled-callback/use-throttled-callback.ts"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport { useCallbackRef } from '../use-callback-ref/use-callback-ref';\n\nexport function useThrottledCallbackWithClearTimeout<T extends (...args: any[]) => any>(\n  callback: T,\n  wait: number\n) {\n  const handleCallback = useCallbackRef(callback);\n  const latestInArgsRef = useRef<Parameters<T>>();\n  const latestOutArgsRef = useRef<Parameters<T>>();\n  const active = useRef(true);\n  const waitRef = useRef(wait);\n  const timeoutRef = useRef<number>(-1);\n\n  const clearTimeout = () => window.clearTimeout(timeoutRef.current);\n\n  const callThrottledCallback = useCallback(\n    (...args: Parameters<T>) => {\n      handleCallback(...args);\n      latestInArgsRef.current = args;\n      latestOutArgsRef.current = args;\n      active.current = false;\n    },\n    [handleCallback]\n  );\n\n  const timerCallback = useCallback(() => {\n    if (latestInArgsRef.current && latestInArgsRef.current !== latestOutArgsRef.current) {\n      callThrottledCallback(...latestInArgsRef.current);\n\n      timeoutRef.current = window.setTimeout(timerCallback, waitRef.current);\n    } else {\n      active.current = true;\n    }\n  }, [callThrottledCallback]);\n\n  const throttled = useCallback(\n    (...args: Parameters<T>) => {\n      if (active.current) {\n        callThrottledCallback(...args);\n        timeoutRef.current = window.setTimeout(timerCallback, waitRef.current);\n      } else {\n        latestInArgsRef.current = args;\n      }\n    },\n    [callThrottledCallback, timerCallback]\n  );\n\n  useEffect(() => {\n    waitRef.current = wait;\n  }, [wait]);\n\n  return [throttled, clearTimeout] as const;\n}\n\nexport function useThrottledCallback<T extends (...args: any[]) => any>(callback: T, wait: number) {\n  return useThrottledCallbackWithClearTimeout(callback, wait)[0];\n}\n"],"mappings":";;;;AAGO,SAASA,oCAAoCA,CAACC,QAAQ,EAAEC,IAAI,EAAE;EACnE,MAAMC,cAAc,GAAGC,cAAc,CAACH,QAAQ,CAAC;EAC/C,MAAMI,eAAe,GAAGC,MAAM,CAAE;EAChC,MAAMC,gBAAgB,GAAGD,MAAM,CAAE;EACjC,MAAME,MAAM,GAAGF,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMG,OAAO,GAAGH,MAAM,CAACJ,IAAI,CAAC;EAC5B,MAAMQ,UAAU,GAAGJ,MAAM,CAAC,CAAC,CAAC,CAAC;EAC7B,MAAMK,YAAY,GAAGA,CAAA,KAAMC,MAAM,CAACD,YAAY,CAACD,UAAU,CAACG,OAAO,CAAC;EAClE,MAAMC,qBAAqB,GAAGC,WAAW,CACvC,CAAC,GAAGC,IAAI,KAAK;IACXb,cAAc,CAAC,GAAGa,IAAI,CAAC;IACvBX,eAAe,CAACQ,OAAO,GAAGG,IAAI;IAC9BT,gBAAgB,CAACM,OAAO,GAAGG,IAAI;IAC/BR,MAAM,CAACK,OAAO,GAAG,KAAK;EACvB,GACD,CAACV,cAAc,CAChB;EACD,MAAMc,aAAa,GAAGF,WAAW,CAAC,MAAM;IACtC,IAAIV,eAAe,CAACQ,OAAO,IAAIR,eAAe,CAACQ,OAAO,KAAKN,gBAAgB,CAACM,OAAO,EAAE;MACnFC,qBAAqB,CAAC,GAAGT,eAAe,CAACQ,OAAO,CAAC;MACjDH,UAAU,CAACG,OAAO,GAAGD,MAAM,CAACM,UAAU,CAACD,aAAa,EAAER,OAAO,CAACI,OAAO,CAAC;IAC5E,CAAK,MAAM;MACLL,MAAM,CAACK,OAAO,GAAG,IAAI;IAC3B;EACA,CAAG,EAAE,CAACC,qBAAqB,CAAC,CAAC;EAC3B,MAAMK,SAAS,GAAGJ,WAAW,CAC3B,CAAC,GAAGC,IAAI,KAAK;IACX,IAAIR,MAAM,CAACK,OAAO,EAAE;MAClBC,qBAAqB,CAAC,GAAGE,IAAI,CAAC;MAC9BN,UAAU,CAACG,OAAO,GAAGD,MAAM,CAACM,UAAU,CAACD,aAAa,EAAER,OAAO,CAACI,OAAO,CAAC;IAC9E,CAAO,MAAM;MACLR,eAAe,CAACQ,OAAO,GAAGG,IAAI;IACtC;EACK,GACD,CAACF,qBAAqB,EAAEG,aAAa,CACtC;EACDG,SAAS,CAAC,MAAM;IACdX,OAAO,CAACI,OAAO,GAAGX,IAAI;EAC1B,CAAG,EAAE,CAACA,IAAI,CAAC,CAAC;EACV,OAAO,CAACiB,SAAS,EAAER,YAAY,CAAC;AAClC;AACO,SAASU,oBAAoBA,CAACpB,QAAQ,EAAEC,IAAI,EAAE;EACnD,OAAOF,oCAAoC,CAACC,QAAQ,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC;AAChE"},"metadata":{},"sourceType":"module","externalDependencies":[]}